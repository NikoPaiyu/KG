<div class="row d-flex justify-content-space-between">
    <div class="col-md-12 col-sm-12 mb-2">
      <nz-breadcrumb>
        <nz-breadcrumb-item>
          {{ "business-dashboard.question.dashboard" | translate }}
        </nz-breadcrumb-item>
        <nz-breadcrumb-item>
          <a>
            {{ "business-dashboard.question.portfolio.portfolio" | translate }}
          </a>
        </nz-breadcrumb-item>
      </nz-breadcrumb>
    </div>
    <div class="col-md-12">
      <div class="row d-flex justify-content-space-between">
        <div class="col-md-6">
          <h3>{{ "business-dashboard.question.portfolio.title" | translate }}</h3>
        </div>
        <div class="col-md-6 align-right">
          <button
              nz-button
              (click)="back()"
            >
            Back
            </button>
        </div>
      </div>
    </div>
  </div>
  <nz-divider></nz-divider>
  <div class="row margnrtp-15">
    <div class="col-6">
     <h5>  Assembly :  {{  activeAssembly?.assemblyValue}}</h5>
    </div>
  </div>
  <div class="row margnrtp-15">
    <div class="col-4">
      <div>
        <div class="row margntp-25 marginbtm-15">
          <div class="col-md-8">
            <h5 class="port_hd">{{"business-dashboard.question.portfolio" | translate}}</h5>
          </div>
  
          <div class="col-md-4">
            <button
              *ngIf="isPortfolioOrderChanged"
              nz-button
              (click)="savePortfolioOrder(portfolios)"
            >
              {{"business-dashboard.agenda.agenda-create.saveorder" | translate }}
            </button>
          </div>
        </div>
        <nz-card class="portfolio_blk">
          <ngx-nestable
            id="portfolio"
            [(list)]="portfolios"
            [template]="portfolioTemplate"
            (drop)="onPortfolioItemDropped()"
          >
          </ngx-nestable>
          <ng-template #portfolioTemplate let-row>
            <div class="row fullwidth" [ngClass]="{ selItem: row.item.active }">
              <div class="col-md-2 paddingT5">
                <button nz-button nzSize="small" [ngxNestableDragHandle]="row">
                  <i nz-icon nzType="select" nzTheme="outline"></i>
                </button>
              </div>
              <div class="col-md-10">
                <p (click)="portfolioClick(row.item.value,row.item.status)">
                  {{ (translate.getDefaultLang()=='mal' && row?.item?.labelInMal) ? (row?.item?.labelInMal) :  (row?.item?.label)}}
                  <span *ngIf="row?.item?.status == 'DRAFT'" class="mr-6"><i nz-icon nzType="edit" nzTheme="outline" (click)="edit(row.item,'portfolio')"></i></span>
                </p>
              </div>
            </div>
          </ng-template>
          <!-- <div
            class="row marginbtm-15"
            *ngFor="let portfolio of portfolios; let i = index"
          >
            <div class="col-12" [ngClass]="{ selItem: portfolio.active }">
              <p (click)="portfolioClick(i)">
                {{ portfolio.label }}
              </p>
            </div>
          </div> -->
        </nz-card>

         <div class="row margntp-25">
           <div class="col-md-4">
            <button nzType="default" nz-button
            (click)="addNew('portfolio')"
            >
            Add PortFolio
            </button>
           </div>
         
        </div>
      </div>
  
     
    </div>
    <div class="col-4">
      <div>
        <div class="row margntp-25 marginbtm-15">
          <div class="col-md-8">
            <h5 class="port_hd">{{"cpl.docupload.subject" | translate}}</h5>
          </div>
          <div class="col-md-4">
            <button
              *ngIf="isSubjectOrderChanged"
              nz-button
              (click)="saveSubjectOrder(true)"
            >
              {{"business-dashboard.agenda.agenda-create.saveorder" | translate}}
            </button>
          </div>
        </div>
  
        <nz-card class="portfolio_blk">
          <ngx-nestable
            id="subject"
            [(list)]="subjects"
            [template]="itemTemplate"
            (drop)="onSubjectItemDropped()"
          >
          </ngx-nestable>
          <ng-template #itemTemplate let-row>
            <div class="row fullwidth" [ngClass]="{ selItem: row.item.active }">
              <div class="col-md-2 paddingT5">
                <button nz-button nzSize="small" [ngxNestableDragHandle]="row">
                  <i nz-icon nzType="select" nzTheme="outline"></i>
                </button>
              </div>
              <div class="col-md-10">
                <p (click)="subjectClick(row.item.value)">
                  {{ (translate.getDefaultLang()=='mal' && row?.item?.labelInMal) ? (row?.item?.labelInMal) :  (row?.item?.label)}}
                  <span *ngIf="portFolioStatus == 'DRAFT'" class="mr-6"><i nz-icon nzType="edit" nzTheme="outline" (click)="edit(row.item,'subject')"></i></span>
                </p>
              </div>
            </div>
          </ng-template>
        </nz-card>
        <div class="row margntp-25">
          <div class="col-md-4">
           <button nzType="default" nz-button
           (click)="addNew('subject')"
           >
           Add Subject
           </button>
          </div>
        
       </div>
      </div>
    </div>
    <div class="col-4">
      <div>
        <div class="row margntp-25 marginbtm-15">
          <div class="col-md-8">
            <h5 class="port_hd">{{"business-dashboard.question.SubSubject" | translate}}</h5>
          </div>
          <div class="col-md-4">
            <button
              *ngIf="isSubSubjectOrderChanged"
              nz-button
              (click)="saveSubSubjectOrder(true)"
            >
              {{"business-dashboard.agenda.agenda-create.saveorder" | translate}}
            </button>
          </div>
        </div>
        <nz-card class="portfolio_blk">
          <ngx-nestable
            id="subsubject"
            [(list)]="subSubjects"
            [template]="subitemTemplate"
            (drop)="onSubSubjectItemDropped()"
          >
          </ngx-nestable>
          <ng-template #subitemTemplate let-row>
            <div class="row fullwidth" [ngClass]="{ selItem: row.item.active }">
              <div class="col-md-2 paddingT5">
                <button nz-button nzSize="small" [ngxNestableDragHandle]="row">
                  <i nz-icon nzType="select" nzTheme="outline"></i>
                </button>
              </div>
              <div class="col-md-10">
                <p (click)="subSubjectClick(row.item.value)">
                  
                  {{ (translate.getDefaultLang()=='mal' && row?.item?.labelInMal) ? (row?.item?.labelInMal) :  (row?.item?.label)}}
                  <span *ngIf="portFolioStatus == 'DRAFT'" class="mr-6"><i nz-icon nzType="edit" nzTheme="outline" (click)="edit(row.item,'subSubject')"></i></span>
                </p>
              </div>
            </div>
          </ng-template>
        </nz-card>
        <!-- <div class="d-flex add_port">
          <input
            nz-input
            placeholder='{{"business-dashboard.question.addnewitem" | translate}}'
            mdInput
            name="subSubjectValue"
            [(ngModel)]="subSubjectValue"
          />
          <button>
            <i nz-icon nzType="plus" (click)="addSubSubject(subSubjectValue)"></i>
          </button>
        </div> -->
        <div class="row margntp-25">
          <div class="col-md-4">
           <button nzType="default" nz-button
           (click)="addNew('subSubject')"
           >
           Add Sub Subject
           </button>
          </div>
        
       </div>
      </div>
    </div>
  </div>
  <nz-modal
        [(nzVisible)]="isVisible"
        nzTitle="{{editId ? 'Edit ': 'Add New ' + getType()}}"
        (nzOnCancel)="handleCancel()"
        (nzOnOk)="handleOk()"
      >
      <div class="padding_25">

        <div class="row margnrtp-15">
            <div class="col-md-4">
               Enter {{ getType() }} in English
             </div>
             <div class="col-md-6">
              <input
              nz-input
              placeholder='Enter {{ getType() }} in English'
              mdInput
              name="title"
              [(ngModel)]="title"
            />
             </div>
          </div> 
          <div class="row margnrtp-15">
            <div class="col-md-4">
               Enter  {{getType()}} in Malayalam
             </div>
             <div class="col-md-6">
              <input
              nz-input
              placeholder=' Enter  {{getType()}} in Malayalam'
              mdInput
              name="titleMalayalam"
              [(ngModel)]="titleMalayalam"
            />
             </div>
          </div> 
        </div>
      </nz-modal> 