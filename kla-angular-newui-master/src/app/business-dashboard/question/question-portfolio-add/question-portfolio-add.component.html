<div class="row d-flex justify-content-space-between">
  <div class="col-md-12 col-sm-12 mb-2">
    <nz-breadcrumb>
      <nz-breadcrumb-item>
        {{ "business-dashboard.question.dashboard" | translate }}
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a>
          {{ "business-dashboard.question.portfolio.portfolio" | translate }}
        </a>
      </nz-breadcrumb-item>
    </nz-breadcrumb>
  </div>
  <div class="col-md-12">
    <div class="row d-flex justify-content-space-between">
      <div class="col-md-12">
        <h3>{{ "business-dashboard.question.portfolio.title" | translate }}</h3>
      </div>
    </div>
  </div>
</div>
<nz-divider></nz-divider>

<div class="row">
  <div class="col-4">
    <div>
      <div class="row margntp-25 marginbtm-15">
        <div class="col-md-8">
          <h5 class="port_hd">{{"business-dashboard.question.portfolio" | translate}}</h5>
        </div>

        <div class="col-md-4">
          <button
            *ngIf="isPortfolioOrderChanged"
            nz-button
            (click)="savePortfolioOrder()"
          >
            {{"business-dashboard.agenda.agenda-create.saveorder" | translate }}
          </button>
        </div>
      </div>
      <nz-card class="portfolio_blk">
        <ngx-nestable
          id="portfolio"
          [(list)]="portfolios"
          [template]="portfolioTemplate"
          (drop)="onPortfolioItemDropped()"
        >
        </ngx-nestable>
        <ng-template #portfolioTemplate let-row>
          <div class="row fullwidth" [ngClass]="{ selItem: row.item.active }">
            <div class="col-md-1 paddingT5 pdlzero">
              <button nz-button nzSize="small" [ngxNestableDragHandle]="row">
                <i nz-icon nzType="select" class="white" nzTheme="outline"></i>
              </button>
            </div>
            <div class="col-md-10 pdlzero">
              <p (click)="portfolioClick(row.item.value)">
                {{ row.item.label }}
              </p>
            </div>
          </div>
        </ng-template>
        <!-- <div
          class="row marginbtm-15"
          *ngFor="let portfolio of portfolios; let i = index"
        >
          <div class="col-12" [ngClass]="{ selItem: portfolio.active }">
            <p (click)="portfolioClick(i)">
              {{ portfolio.label }}
            </p>
          </div>
        </div> -->
      </nz-card>
      <!-- <input style="border: 1px solid black; border-top-style: none;" nz-input placeholder="Add new item" mdInput
                name="portfolioValue" [(ngModel)]="portfolioValue" />
            <button><i nz-icon nzType="plus" (click)="addPortfolio(portfolioValue)"></i></button> -->
    </div>

    <nz-modal
      [(nzVisible)]="isVisible"
      nzTitle="Enter Portfolio"
      (nzOnCancel)="handleCancel()"
      (nzOnOk)="handleOk()"
    >
      <input
        nz-input
        placeholder="Add new item"
        mdInput
        name="portfolioEditValue"
        [(ngModel)]="portfolioEditValue"
      />
    </nz-modal>
  </div>
  <div class="col-4">
    <div>
      <div class="row margntp-25 marginbtm-15">
        <div class="col-md-8">
          <h5 class="port_hd">{{"cpl.docupload.subject" | translate}}</h5>
        </div>
        <div class="col-md-4">
          <button
            *ngIf="isSubjectOrderChanged"
            nz-button
            (click)="saveSubjectOrder(true)"
          >
            {{"business-dashboard.agenda.agenda-create.saveorder" | translate}}
          </button>
        </div>
      </div>

      <nz-card class="portfolio_blk">
        <ngx-nestable
          id="subject"
          [(list)]="subjects"
          [template]="itemTemplate"
          (drop)="onSubjectItemDropped()"
        >
        </ngx-nestable>
        <ng-template #itemTemplate let-row>
          <div class="row fullwidth" [ngClass]="{ selItem: row.item.active }">
            <div class="col-md-1 pdlzero paddingT5">
              <button nz-button nzSize="small" [ngxNestableDragHandle]="row">
                <i nz-icon nzType="select" class="white" nzTheme="outline"></i>
              </button>
            </div>
            <div class="col-md-10 pdlzero">
              <p (click)="subjectClick(row.item.value)">{{ row.item.label }}</p>
            </div>
          </div>
        </ng-template>
      </nz-card>
      <div class="d-flex add_port">
        <input
          nz-input
          placeholder='{{"business-dashboard.question.addnewitem" | translate}}'
          mdInput
          name="subjectValue"
          [(ngModel)]="subjectValue"
        />
        <button>
          <i nz-icon nzType="plus" (click)="addSubject(subjectValue)"></i>
        </button>
      </div>
    </div>
  </div>
  <div class="col-4">
    <div>
      <div class="row margntp-25 marginbtm-15">
        <div class="col-md-8">
          <h5 class="port_hd">{{"business-dashboard.question.SubSubject" | translate}}</h5>
        </div>
        <div class="col-md-4">
          <button
            *ngIf="isSubSubjectOrderChanged"
            nz-button
            (click)="saveSubSubjectOrder(true)"
          >
            {{"business-dashboard.agenda.agenda-create.saveorder" | translate}}
          </button>
        </div>
      </div>
      <nz-card class="portfolio_blk">
        <ngx-nestable
          id="subsubject"
          [(list)]="subSubjects"
          [template]="subitemTemplate"
          (drop)="onSubSubjectItemDropped()"
        >
        </ngx-nestable>
        <ng-template #subitemTemplate let-row>
          <div class="row fullwidth" [ngClass]="{ selItem: row.item.active }">
            <div class="col-md-1 pdlzero paddingT5">
              <button nz-button nzSize="small" [ngxNestableDragHandle]="row">
                <i nz-icon nzType="select" class="white" nzTheme="outline"></i>
              </button>
            </div>
            <div class="col-md-10 pdlzero">
              <p (click)="subSubjectClick(row.item.value)">
                {{ row.item.label }}
              </p>
            </div>
          </div>
        </ng-template>
      </nz-card>
      <div class="d-flex add_port">
        <input
          nz-input
          placeholder='{{"business-dashboard.question.addnewitem" | translate}}'
          mdInput
          name="subSubjectValue"
          [(ngModel)]="subSubjectValue"
        />
        <button>
          <i nz-icon nzType="plus" (click)="addSubSubject(subSubjectValue)"></i>
        </button>
      </div>
    </div>
  </div>
</div>
