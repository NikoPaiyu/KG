<div class="row">
  <div class="col-md-12 col-sm-12 mb-2">
    <nz-breadcrumb>
      <nz-breadcrumb-item>
        {{ "business-dashboard.question.dashboard" | translate }}
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        {{ "business-dashboard.question.question" | translate }}
      </nz-breadcrumb-item>
    </nz-breadcrumb>
  </div>
</div>
<div class="row">
  <div class="col-md-4">
    <h2 class="admin-page-heading">
      {{ "business-dashboard.question.qclubbingrequest" | translate }}
    </h2>
  </div>
  <div class="col-md-8">
    <button
      nz-button
      nzType="primary"
      class="mr-6 fix-btn"
      (click)="handleNotes(true)"
    >
      {{ "business-dashboard.question.notes" | translate }}({{
        notesList.length
      }})
    </button>
  </div>
</div>
<div class="row">
  <div class="col-md-12 text-align-right">
    <button
      nz-button
      nzType="default"
      nz-popconfirm
      nzPopconfirmTitle='{{"business-dashboard.question.areusureuwantreject" | translate}}'
      nzCancelText="No"
      nzOkText="Yes"
      (nzOnConfirm)="onReject()"
      style="margin-left: 6px;"
    >
      {{ "business-dashboard.question.qclubbing.reject" | translate }}
    </button>
    <button
      nz-button
      nzType="primary"
      nz-popconfirm
      nzPopconfirmTitle='{{"business-dashboard.question.areusureuwantaccept" | translate}}'
      nzCancelText="No"
      nzOkText="Yes"
      (nzOnConfirm)="onAccept()"
      nzPopconfirmPlacement="bottomLeft"
      style="margin-left: 6px;"
    >
      {{ "business-dashboard.question.qclubbing.accept" | translate }}
    </button>
  </div>
</div>
<nz-divider></nz-divider>
<div class="row margnrtp-15" *ngIf="clubbingData">
  <ng-container *ngIf="clubbingData.masterQuestion">
    <div class="col-md-6 border-right">
      <div class="row margnrtp-15">
        <div class="col-md-12">
          <div class="row margnrtp-15">
            <div class="col-md-6">
              {{ "business-dashboard.question.qclubbing.reqon" | translate }}:
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-6">
              <b
                >{{
                  "business-dashboard.question.questionlist.questionnumber"
                    | translate
                }}:</b
              >
              <b>{{ clubbingData.masterQuestion.questionNumber }}</b>
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-3">
              {{ "business-dashboard.question.questionheading" | translate }}:
            </div>
            <div class="col-md-6">
              {{ clubbingData.masterQuestion.heading }}
            </div>
          </div>
          <div
            class="row margnrtp-15"
            *ngFor="
              let i = index;
              let clause;
              of: clubbingData.masterQuestion.clauses
            "
          >
            <div class="col-md-12">
              <div class="">
                <div class="row">
                  <div class="col-md-12">
                    {{ "Clause " + clauseNo[i] }}
                  </div>
                </div>
                <div class="row margnrtp-15">
                  <div class="col-md-12">
                    <nz-card>
                      <div class="row">
                        <div class="col-md-12">
                          {{ clause.clause }}
                        </div>
                      </div>
                    </nz-card>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.mlaName" | translate }}:
            </div>
            <div class="col-md-6">
              <div
                class="row margnrtp-15 border-style"
                *ngFor="let data of clubbingData.masterQuestion.clubbingDetails"
              >
                {{ data.memberName }}
              </div>
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.dateofreg" | translate }}:
            </div>
            <div class="col-md-4">
              {{
                clubbingData.masterQuestion.registrationDate
                  | date: "dd-MM-yyyy"
              }}
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.questiondate" | translate }}:
            </div>
            <div class="col-md-4">
              {{
                clubbingData.masterQuestion.questionDate | date: "dd-MM-yyyy"
              }}
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.qcategory" | translate }}:
            </div>
            <div class="col-md-8">
              {{ clubbingData.masterQuestion.category }}
            </div>
          </div>
          <!-- <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.questionpriority" | translate }}:
            </div>
            <div class="col-md-4">
              {{ clubbingData.masterQuestion.priority }}
            </div>
          </div> -->
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{"business-dashboard.question.minister" | translate}}:
            </div>
            <div
            class="col-md-4"
            *ngIf="clubbingData.masterQuestion.portfolio"
          >
            {{ clubbingData.masterQuestion.portfolio ? clubbingData.masterQuestion.portfolio.name : '' }}
          </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.ministersubject" | translate }}:
            </div>
            <div
              class="col-md-4"
              *ngIf="clubbingData.masterQuestion.subjectName"
            >
              {{ clubbingData.masterQuestion.subjectName }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
  <ng-container *ngIf="clubbingData.clubbingQuestion">
    <div class="col-md-6 border-right">
      <div class="row margnrtp-15">
        <div class="col-md-12">
          <div class="row margnrtp-15">
            <div class="col-md-6">
              {{ "business-dashboard.question.qclubbing.reqwith" | translate }}:
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-6">
              <b
                >{{
                  "business-dashboard.question.questionlist.questionnumber"
                    | translate
                }}:</b
              >
              <b>{{ clubbingData.clubbingQuestion.questionNumber }}</b>
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-3">
              {{ "business-dashboard.question.questionheading" | translate }}:
            </div>
            <div class="col-md-6">
              {{ clubbingData.clubbingQuestion.heading }}
            </div>
          </div>
          <div
            class="row margnrtp-15"
            *ngFor="
              let i = index;
              let clause;
              of: clubbingData.clubbingQuestion.clauses
            "
          >
            <div class="col-md-12">
              <div class="">
                <div class="row">
                  <div class="col-md-12">
                    {{ "Clause " + clauseNo[i] }}
                  </div>
                </div>
                <div class="row margnrtp-15">
                  <div class="col-md-12">
                    <nz-card>
                      <div class="row">
                        <div class="col-md-12">
                          {{ clause.clause }}
                        </div>
                      </div>
                    </nz-card>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.mlaName" | translate }}:
            </div>
            <div class="col-md-6">
              <div
                class="row margnrtp-15 border-style"
                *ngFor="
                  let data of clubbingData.clubbingQuestion.clubbingDetails
                "
              >
                {{ data.memberName }}
              </div>
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.dateofreg" | translate }}:
            </div>
            <div class="col-md-4">
              {{
                clubbingData.clubbingQuestion.registrationDate
                  | date: "dd-MM-yyyy"
              }}
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.questiondate" | translate }}:
            </div>
            <div class="col-md-4">
              {{
                clubbingData.clubbingQuestion.questionDate | date: "dd-MM-yyyy"
              }}
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.qcategory" | translate }}:
            </div>
            <div class="col-md-8">
              {{ clubbingData.clubbingQuestion.category }}
            </div>
          </div>
          <!-- <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.questionpriority" | translate }}:
            </div>
            <div class="col-md-4">
              {{ clubbingData.clubbingQuestion.priority }}
            </div>
          </div> -->
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{"business-dashboard.question.minister" | translate}}:
            </div>
            <div
              class="col-md-4"
              *ngIf="clubbingData.clubbingQuestion.portfolio"
            >
              {{ clubbingData.clubbingQuestion.portfolio ? clubbingData.clubbingQuestion.portfolio.name : '' }}
            </div>
          </div>
          <div class="row margnrtp-15">
            <div class="col-md-4">
              {{ "business-dashboard.question.ministersubject" | translate }}:
            </div>
            <div
              class="col-md-4"
              *ngIf="clubbingData.clubbingQuestion.subjectName"
            >
              {{ clubbingData.clubbingQuestion.subjectName }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>

<!-- custom note popup -->
<div class="custom_note" [ngClass]="{ shownote: shownotes }">
  <div class="ant-drawer-header ant-drawer-header-no-title ng-star-inserted">
    <!---->
    <div class="ant-drawer-title ng-star-inserted">
      <!---->
      <!---->
      <div class="ng-star-inserted">{{"business-dashboard.question.notes" | translate}}</div>
    </div>
    <!----><button
      aria-label="Close"
      class="ant-drawer-close ng-star-inserted"
      (click)="handleNotes(false)"
    >
      <i nz-icon="" nztype="close" class="anticon anticon-close"></i>
    </button>
  </div>
  <div #scrollMe class="chat-main-body" [scrollTop]="scrollMe.scrollHeight">
    <nz-card *ngFor="let data of notesList; let i = index" class="mrgn-15">
        <div class="row">
          <div class="col-md-12">
            <div>
              <span *ngIf="data.noteditable">
                <nz-input-group
                  nzSearch
                  nzSize="large"
                  [nzAddOnAfter]="suffixButton"
                >
                  <input
                    type="text"
                    nzSize="large"
                    nz-input
                    [(ngModel)]="editedNote"
                    name="editedNote"
                    nz-input
                    placeholder='{{"business-dashboard.question.typeyournotes" | translate}}'
                  />
                </nz-input-group>
                <ng-template #suffixButton>
                  <button
                    nzType="default"
                    (click)="updateNotes(i)"
                    nz-button
                  >
                    {{"business-dashboard.question.save" | translate}}
                  </button>
                </ng-template>
              </span>
              <span *ngIf="!data.noteditable"
                ><b>{{ data.note }}</b>
                <div class="col-md-12 d-flex justify-content-end pr-0">
                  <div nz-row hover>
                    <button
                      *ngIf="data.editNote"
                      nz-button
                      nzType="default"
                      (click)="editNotes(i)"
                    >
                    {{"business-dashboard.question.edit" | translate }}</button
                    >&nbsp;&nbsp;
                  </div>
                </div>
                </span
              >
              <div>
              </div>
            </div>
          </div>
        </div>
    </nz-card>
  </div>
  <div class="chat-footer">
    <div>
      <div class="col">
        <div>
          <span>
            <nz-input-group
              nzSearch
              nzSize="large"
              [nzAddOnAfter]="suffixButton"
            >
              <input
                type="text"
                nzSize="large"
                nz-input
                [(ngModel)]="noteGiven"
                name="noteGiven"
                nz-input
                placeholder='{{"business-dashboard.question.typeyourcomments&notes" | translate}}'
              />
            </nz-input-group>
            <ng-template #suffixButton>
              <button nzType="default" (click)="saveNotes()" nz-button>
                {{ "business-dashboard.question.save" | translate }}
              </button>
            </ng-template>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
