<div class="row d-flex justify-content-space-between">
    <div class="col-md-12 col-sm-12 mb-2">
        <nz-breadcrumb>
            <nz-breadcrumb-item>
                {{ "cpl.actregistration.dash" | translate }}
            </nz-breadcrumb-item>
            <nz-breadcrumb-item>
                {{"cpl.files.files" | translate}}
            </nz-breadcrumb-item>
        </nz-breadcrumb>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h2 class="admin-page-heading">{{"cpl.files.files" | translate}}</h2>
    </div>
</div>
<nz-divider></nz-divider>
<nz-tabset [(nzSelectedIndex)]="tabIndex">
    <nz-tab nzTitle='{{"cpl.files.filesforAction" | translate}}'
        (nzClick)="getAssemblyAndSession();getPendingFiles();clearFilter();clearSearch(); pendingType = null"
        *ngIf="tabShow">
        <div class="row marginbtm-15">
            <div class="col-md-2 d-flex align-items-center whitespace">
                {{"cpl.docupload.assembly" | translate}}
                <nz-select nzAllowClear nzPlaceHolder="" name="assemblyId" [(ngModel)]="assemblyId"
                    (ngModelChange)="getSessionForAssembly()">
                    <nz-option *ngFor="let item of assemblyList" [nzLabel]="item.assemblyId" [nzValue]="item.id">
                    </nz-option>
                </nz-select>
            </div>
            <div class="col-md-2 d-flex align-items-center whitespace">
                {{"cpl.docupload.session" | translate}}
                <nz-select nzAllowClear nzPlaceHolder="" name="sessionId" [(ngModel)]="sessionId"
                    (ngModelChange)="getPendingFiles()">
                    <nz-option *ngFor="let item of sessionList" [nzLabel]="item.sessionId" [nzValue]="item.id">
                    </nz-option>
                </nz-select>
            </div>
            <div class="col-md-1 d-flex align-items-center">
                <button class="plus-arrange" nz-button [nzType]="'primary'" (click)="showModal()">
                    <i nz-icon nzType="plus"></i>
                </button>
                <nz-modal [(nzVisible)]="isVisibleFilter" nzTitle='{{"business-dashboard.cpl.documents.filtercoloums" | translate}}' (nzOnCancel)="_hideFilter()"
                    (nzOnOk)="_showFilter()">
                    <div class="width-100 pading-all">
                        <div class="row">
                            <div class="col-md-12">
                                <p *ngFor="let box of filterCheckboxes; let i = index" class="checkbox-style">
                                    <label nz-checkbox name="checkbox{{ i }}" (ngModelChange)="_chooseFilter(box)"
                                        [(ngModel)]="box.checked">{{ box.label }}</label>
                                </p>
                            </div>
                        </div>
                    </div>
                </nz-modal>
            </div>
            <div class="col-md-4 d-flex justify-content-end">
                <button nz-button nzType="default" (click)="clearFilter();clearSearch()" (keyup.enter)="doNothing()">
                    {{"cpl.documents.clearfilter" | translate}}
                </button>
            </div>
            <div class="col-md-3 d-flex align-items-center">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" [(ngModel)]="searchPending" (ngModelChange)="filtering()" name="search" nz-input
                        placeholder='{{"cpl.registration.searchhere" | translate }}' />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <i nz-icon nzType="search"></i>
                </ng-template>
            </div>
        </div>
        <div class="row fltr">
            <div class="col-md-4" *ngIf="filenodisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.documents.fileno" | translate}}.
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.fileNumber"
                            name="filenum" (ngModelChange)="searchCol(filterSelected)">
                            <nz-option *ngFor="let num of fileno" [nzLabel]="num" [nzValue]="num"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(1)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="filesubjectdisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subject"
                            name="filesub" (ngModelChange)="searchCol(filterSelected)">
                            <nz-option *ngFor="let sub of filesubject" [nzLabel]="sub" [nzValue]="sub"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(2)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="prioritydisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.priority" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.priority"
                            name="status" (ngModelChange)="searchCol(filterSelected)">
                            <nz-option *ngFor="let p of priority" [nzLabel]="p" [nzValue]="p"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(3)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="subtypeDisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subtype"
                            name="subtype" (ngModelChange)="searchCol(filterSelected)">
                            <nz-option *ngFor="let type of filesubtype" [nzLabel]="type" [nzValue]="type"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(4)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="regdatedisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.regdate" | translate}}
                    </div>
                    <div class="word-break">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.regDate"
                            name="regdate" (ngModelChange)="searchCol(filterSelected)">
                            <nz-option *ngFor="let date of regDate" [nzLabel]="date | date: 'dd-MM-yyyy'"
                                [nzValue]="date"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(5)"></i>
                    </div>
                </div>
            </div>
        </div>
        <nz-table #fileTable nzShowPagination nzShowSizeChanger [nzData]="pendingFiles" class="table-all">
            <thead nzSingleSort (nzSortChange)="sortFile($event)">
                <tr>
                    <th nzShowSort nzSortKey="fileNumber">
                        {{"cpl.documents.fileno" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="subject">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="priority">
                        {{"cpl.files.priority" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="from" class="word-break">
                        {{"cpl.docupload.fromwhom" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="type">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="createdDate" class="reg-date">
                        {{"cpl.files.regdate" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="status">
                        {{"cpl.docamendments.status" | translate}}
                    </th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let list of fileTable.data; let i = index">
                    <!-- <tr *ngIf=" list.type==='CPL'" (click)=" viewFile(list.fileId)"> -->
                    <tr nz-popover nzType="primary" nzPopoverPlacement="left"
                        [nzPopoverContent]="cplTabs.files ? contentTemplate : null" (click)="viewFile(list.fileId, tabIndex)">
                        <ng-template #contentTemplate>
                            <div>
                                <span *ngIf="list.type === 'CPL'" class="sortable"
                                    (click)="viewFile(list.fileId, tabIndex)">{{"cpl.docpreparion.view" | translate}}</span>
                                <span> | </span>
                                <span class="sortable" (click)="showEditModal(list)">{{"cpl.cplview.edit" | translate}}</span>
                            </div>
                        </ng-template>
                        <td>
                            <a>
                                {{ list.fileNumber }}
                            </a>
                        </td>
                        <td class="word-break">
                            {{ list.subject }}
                        </td>
                        <td>
                            {{ list.priority?.replace("_", " ") }}
                        </td>
                        <td class="word-break"
                        *ngIf="list.subtype !== 'WITHDRAW' && list.subtype !== 'AMENDMENT'" class="word-break">
                            {{ list.fromWhom }}
                        </td>
                        <td class="word-break"
                        *ngIf="list.subtype === 'WITHDRAW' || list.subtype === 'AMENDMENT'" class="word-break">
                            {{ list.ministerDepartmentName }}
                        </td>
                        <td class="word-break"
                        *ngIf="list.subtype !== 'SRO' && list.subtype !== 'ORDINANCE' && list.subtype !== 'LIST'
                        && list.subtype !== 'AMENDMENT'">
                            {{"cpl.files.report" | translate}}/{{ list.subtype }}
                        </td>
                        <td class="word-break"
                        *ngIf="list.subtype === 'SRO' || list.subtype === 'ORDINANCE' || list.subtype === 'LIST'
                        || list.subtype === 'AMENDMENT'">
                            {{ list.subtype }}
                        </td>
                        <td>
                            {{ list.createdDate | date: "dd-MM-yyyy" }}
                        </td>
                        <td>
                            <nz-tag [nzColor]="'green'">{{ list.status?.replace("_", " ") }}</nz-tag>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </nz-table>
    </nz-tab>
    <nz-tab nzTitle='{{"cpl.files.AllFiles" | translate}}' (nzClick)="getAssemblyAndSession();getAllFileList();clearFilter();clearSearch()"
        *ngIf="tabShow && cplTabs.allFiles">
        <div class="row marginbtm-15">
            <div class="col-md-2 d-flex align-items-center whitespace">
                {{"cpl.docupload.assembly" | translate}}
                <nz-select nzAllowClear nzPlaceHolder="" name="assemblyId" [(ngModel)]="assemblyId"
                    (ngModelChange)="getSessionForAssembly()">
                    <nz-option *ngFor="let item of assemblyList" [nzLabel]="item.assemblyId" [nzValue]="item.id">
                    </nz-option>
                </nz-select>
            </div>
            <div class="col-md-2 d-flex align-items-center whitespace">
                {{"cpl.docupload.session" | translate}}
                <nz-select nzAllowClear nzPlaceHolder="" name="sessionId" [(ngModel)]="sessionId"
                    (ngModelChange)="getAllFileList()">
                    <nz-option *ngFor="let item of sessionList" [nzLabel]="item.sessionId" [nzValue]="item.id">
                    </nz-option>
                </nz-select>
            </div>
            <div class="col-md-3">
                <div class="row align-items-center">
                    <div class="col-md-5 wordbreak">{{"cpl.docamendments.status" | translate}}:</div>
                    <div class="col-md-7">
                        <nz-form-item>
                            <nz-form-control nzErrorTip="Select Type">
                                <nz-select nzRequired nzShowSearch nzAllowClear nzPlaceHolder=""
                                    [(ngModel)]="fileStatusType" (ngModelChange)="getAllFileList()">
                                    <nz-option *ngFor="let doc of statusType" [nzLabel]="doc?.split('_').join(' ')" [nzValue]="doc">
                                    </nz-option>
                                </nz-select>
                            </nz-form-control>
                        </nz-form-item>
                    </div>
                </div>
            </div>
            <div class="col-md-1 d-flex align-items-center">
                <button class="plus-arrange" nz-button [nzType]="'primary'" (click)="showModal()">
                    <i nz-icon nzType="plus"></i>
                </button>
            </div>
            <div class="col-md-2 d-flex justify-content-end">
                <button nz-button nzType="default" (click)="clearFilter();clearSearch()" (keyup.enter)="doNothing()">
                    {{"cpl.documents.clearfilter" | translate}}
                </button>
            </div>
            <div class="col-md-2 d-flex align-items-center justify-content-end">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" name="search" [(ngModel)]="searchAllFiles" (ngModelChange)="onSearch()" nz-input
                        placeholder='{{"cpl.registration.searchhere" | translate }}' />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <i nz-icon nzType="search"></i>
                </ng-template>
            </div>
        </div>
        <div class="row fltr">
            <div class="col-md-4" *ngIf="filenodisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.documents.fileno"| translate}}.
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.fileNumber"
                            name="filenum" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let num of fileno" [nzLabel]="num" [nzValue]="num"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(1)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="filesubjectdisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subject"
                            name="filesub" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let sub of filesubject" [nzLabel]="sub" [nzValue]="sub"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(2)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="prioritydisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.priority" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.priority"
                            name="status" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let p of priority" [nzLabel]="p" [nzValue]="p"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(3)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="subtypeDisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subtype"
                            name="subtype" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let type of filesubtype" [nzLabel]="type" [nzValue]="type"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(4)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="regdatedisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.regdate" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.regDate"
                            name="regdate" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let date of regDate" [nzLabel]="date | date: 'dd-MM-yyyy'"
                                [nzValue]="date"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(5)"></i>
                    </div>
                </div>
            </div>
        </div>
        <nz-table #fileTable nzShowPagination nzShowSizeChanger [nzData]="FileAllList" class="table-all">
            <thead nzSingleSort (nzSortChange)="sortFile($event)">
                <tr>
                    <th nzShowSort nzSortKey="fileNumber">
                        {{"cpl.documents.fileno" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="subject">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="priority">
                        {{"cpl.files.priority" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="from" class="word-break">
                        {{"cpl.docupload.fromwhom" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="from">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="createdDate" class="reg-date">
                        {{"cpl.files.regdate" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="status">
                        {{"cpl.docamendments.status" | translate}}
                    </th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let list of fileTable.data; let i = index">
                    <tr nz-popover nzType="primary" nzPopoverPlacement="bottomLeft" [nzPopoverContent]="contentTemplate"
                        (click)="viewFile(list.fileId, tabIndex)">
                        <ng-template #contentTemplate>
                            <div>
                                <span class="sortable" *ngIf="list.type === 'CPL'"
                                    (click)="viewFile(list.fileId, tabIndex)">View</span>
                            </div>
                        </ng-template>
                        <td>
                            <a>
                                {{ list.fileNumber }}
                            </a>
                        </td>
                        <td>
                            {{ list.subject }}
                        </td>
                        <td>
                            {{ list.priority?.replace("_", " ") }}
                        </td>
                        <td *ngIf="list.subtype !== 'WITHDRAW' && list.subtype !== 'AMENDMENT'" class="break-word">
                            {{ list.fromWhom }}
                        </td>
                        <td *ngIf="list.subtype === 'WITHDRAW' || list.subtype === 'AMENDMENT'" class="break-word">
                            {{ list.ministerDepartmentName }}
                        </td>
                        <td>
                            {{ list.subtype }}
                        </td>
                        <td>
                            {{ list.createdDate | date: "dd-MM-yyyy" }}
                        </td>
                        <td>
                            <nz-tag [nzColor]="'green'">{{ list.status?.replace("_", " ") }}</nz-tag>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </nz-table>
    </nz-tab>
    <nz-tab nzTitle='{{"cpl.files.myfiles" | translate}}' (nzClick)="getAssemblyAndSession();getApprovedFiles();clearFilter();clearSearch()"
        *ngIf="tabShow && cplTabs.myFiles">
        <div class="row marginbtm-15">
            <div class="col-md-4">
                <div class="row align-items-center">
                    <div class="col-md-3">{{"cpl.docamendments.status" | translate}}:</div>
                    <div class="col-md-7">
                        <nz-form-item>
                            <nz-form-control nzErrorTip='{{"cpl.templatecreate.selecttype" | translate}}'>
                                <nz-select nzRequired nzShowSearch nzAllowClear nzPlaceHolder=""
                                    [(ngModel)]="approvedFileStatusType" (ngModelChange)="searchMyFiles()">
                                    <nz-option *ngFor="let doc of statusType" [nzLabel]="doc?.split('_').join(' ')" [nzValue]="doc">
                                    </nz-option>
                                </nz-select>
                            </nz-form-control>
                        </nz-form-item>
                    </div>
                </div>
            </div>
            <div class="col-md-2 d-flex align-items-center">
                <button class="plus-arrange" nz-button [nzType]="'primary'" (click)="showModal()">
                    <i nz-icon nzType="plus"></i>
                </button>
            </div>
            <div class="col-md-3 d-flex justify-content-end">
                <button nz-button nzType="default" (click)="clearFilter();clearSearch()" (keyup.enter)="doNothing()">
                    {{"cpl.documents.clearfilter" | translate}}
                </button>
            </div>
            <div class="col-md-3 d-flex align-items-center justify-content-end">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" name="search" [(ngModel)]="searchMyFile" (ngModelChange)="searchMyFiles()"
                        nz-input placeholder='{{"cpl.registration.searchhere" | translate }}' />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <i nz-icon nzType="search"></i>
                </ng-template>
            </div>
        </div>
        <div class="row fltr">
            <div class="col-md-4" *ngIf="filenodisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.documents.fileno" | translate}}.
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.fileNumber"
                            name="filenum" (ngModelChange)="searchMyFileCol(filterSelected)">
                            <nz-option *ngFor="let num of fileno" [nzLabel]="num" [nzValue]="num"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(1)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="filesubjectdisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subject"
                            name="filesub" (ngModelChange)="searchMyFileCol(filterSelected)">
                            <nz-option *ngFor="let sub of filesubject" [nzLabel]="sub" [nzValue]="sub"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(2)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="prioritydisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.priority" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.priority"
                            name="status" (ngModelChange)="searchMyFileCol(filterSelected)">
                            <nz-option *ngFor="let p of priority" [nzLabel]="p" [nzValue]="p"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(3)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="subtypeDisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subtype"
                            name="subtype" (ngModelChange)="searchMyFileCol(filterSelected)">
                            <nz-option *ngFor="let type of filesubtype" [nzLabel]="type" [nzValue]="type"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(4)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="regdatedisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.regdate" | translate }}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.regDate"
                            name="regdate" (ngModelChange)="searchMyFileCol(filterSelected)">
                            <nz-option *ngFor="let date of regDate" [nzLabel]="date | date: 'dd-MM-yyyy'"
                                [nzValue]="date"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(5)"></i>
                    </div>
                </div>
            </div>
        </div>
        <nz-table #fileTable nzShowPagination nzShowSizeChanger [nzData]="approvedFileList" class="table-all">
            <thead nzSingleSort (nzSortChange)="sortFile($event)">
                <tr>
                    <th nzShowSort nzSortKey="fileNumber">
                        {{"cpl.documents.fileno" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="subject">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="priority">
                        {{"cpl.files.priority" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="type">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="createdDate" class="reg-date">
                        {{"cpl.files.regdate" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="status">
                        {{"cpl.docamendments.status" | translate}}
                    </th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let list of fileTable.data; let i = index">
                    <tr (click)="viewFile(list.fileId, tabIndex)">
                        <td>
                            <a>
                                {{ list.fileNumber }}
                            </a>
                        </td>
                        <td>
                            {{ list.subject }}
                        </td>
                        <td>
                            {{ list.priority?.replace("_", " ") }}
                        </td>
                        <td class="word-break"
                        *ngIf="list.subtype !== 'SRO' && list.subtype !== 'ORDINANCE' && list.subtype !== 'LIST'
                        && list.subtype !== 'AMENDMENT'">
                            {{"cpl.files.report" | translate}}<a *ngIf="list.subtype !== null">/</a>{{ list.subtype?.replace("_", " ")?.replace("_", " ")?.replace("_", " ") }}
                        </td>
                        <td class="word-break"
                        *ngIf="list.subtype === 'SRO' || list.subtype === 'ORDINANCE' || list.subtype === 'LIST'
                        || list.subtype === 'AMENDMENT'">
                            {{ list.subtype }}
                        </td>
                        <td>
                            {{ list.createdDate | date: "dd-MM-yyyy" }}
                        </td>
                        <td>
                            <nz-tag [nzColor]="'green'">{{ list.status?.replace("_", " ") }}</nz-tag>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </nz-table>
    </nz-tab>
    <nz-tab nzTitle='{{"cpl.files.filesforratification" | translate}}'
        (nzClick)="getAssemblyAndSession();getPendingRatification();clearFilter();clearSearch()"
        *ngIf="tabShow && ratification">
        <div class="row marginbtm-15">
            <div class="col-md-2 d-flex align-items-center whitespace">
                {{"cpl.docupload.assembly" | translate}}
                <nz-select nzAllowClear nzPlaceHolder="" name="assemblyId" [(ngModel)]="assemblyId"
                    (ngModelChange)="getSessionForAssembly()">
                    <nz-option *ngFor="let item of assemblyList" [nzLabel]="item.assemblyId" [nzValue]="item.id">
                    </nz-option>
                </nz-select>
            </div>
            <div class="col-md-2 d-flex align-items-center whitespace">
                {{"cpl.docupload.session" | translate}}
                <nz-select nzAllowClear nzPlaceHolder="" name="sessionId" [(ngModel)]="sessionId"
                    (ngModelChange)="getPendingRatification()">
                    <nz-option *ngFor="let item of sessionList" [nzLabel]="item.sessionId" [nzValue]="item.id">
                    </nz-option>
                </nz-select>
            </div>
            <div class="col-md-3">
            </div>
            <div class="col-md-1 d-flex align-items-center">
            </div>
            <div class="col-md-2 d-flex justify-content-end">
            </div>
            <div class="col-md-2 d-flex align-items-center justify-content-end">
                <nz-input-group [nzSuffix]="suffixIconSearch">
                    <input type="text" name="search" [(ngModel)]="searchRatificationFile"
                        (ngModelChange)="searchRatification()" nz-input placeholder='{{"cpl.registration.searchhere" | translate }}' />
                </nz-input-group>
                <ng-template #suffixIconSearch>
                    <i nz-icon nzType="search"></i>
                </ng-template>
            </div>
        </div>
        <div class="row fltr">
            <div class="col-md-4" *ngIf="filenodisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.documents.fileno" | translate}}.
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.fileNumber"
                            name="filenum" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let num of fileno" [nzLabel]="num" [nzValue]="num"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(1)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="filesubjectdisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subject"
                            name="filesub" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let sub of filesubject" [nzLabel]="sub" [nzValue]="sub"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(2)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="prioritydisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.priority" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.priority"
                            name="status" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let p of priority" [nzLabel]="p" [nzValue]="p"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(3)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="subtypeDisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.subtype"
                            name="subtype" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let type of filesubtype" [nzLabel]="type" [nzValue]="type"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(4)"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="regdatedisable">
                <div class="row align-items-center">
                    <div class="col-md-3 wordbreak">
                        {{"cpl.files.regdate" | translate}}
                    </div>
                    <div class="col-md-8">
                        <nz-select nzShowSearch nzAllowClear nzPlaceHolder="" [(ngModel)]="filterSelected.regDate"
                            name="regdate" (ngModelChange)="searchAllCol(filterSelected)">
                            <nz-option *ngFor="let date of regDate" [nzLabel]="date | date: 'dd-MM-yyyy'"
                                [nzValue]="date"></nz-option>
                        </nz-select>
                    </div>
                    <div class="col-md-1 pdzero icon-color">
                        <i nz-icon nzType="close-circle" nzTheme="outline" (click)="disableFilter(5)"></i>
                    </div>
                </div>
            </div>
        </div>
        <nz-table #ratificationFileTable nzShowPagination nzShowSizeChanger [nzData]="ratificationList"
            class="table-all">
            <thead nzSingleSort (nzSortChange)="sortFile($event)">
                <tr>
                    <th nzShowSort nzSortKey="fileNumber">
                        {{"cpl.documents.fileno" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="subject">
                        {{"cpl.docamendments.filesubject" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="priority">
                        {{"cpl.files.priority" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="from" class="word-break">
                        {{"cpl.docupload.fromwhom" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="from">
                        {{"cpl.fileworkflow.filetype" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="createdDate" class="reg-date">
                        {{"cpl.files.regdate" | translate}}
                    </th>
                    <th nzShowSort nzSortKey="status">
                        {{"cpl.docamendments.status" | translate}}
                    </th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let list of ratificationFileTable.data; let i = index">
                    <tr nz-popover nzType="primary" nzPopoverPlacement="bottomLeft" [nzPopoverContent]="contentTemplate"
                        (click)="viewFile(list.fileId, tabIndex)">
                        <ng-template #contentTemplate>
                            <div>
                                <span class="sortable" *ngIf="list.type === 'CPL'"
                                    (click)="viewFile(list.fileId, tabIndex)">View</span>
                            </div>
                        </ng-template>
                        <td>
                            <a>
                                {{ list.fileNumber }}
                            </a>
                        </td>
                        <td>
                            {{ list.subject }}
                        </td>
                        <td>
                            {{ list.priority?.replace("_", " ") }}
                        </td>
                        <td *ngIf="list.subtype !== 'WITHDRAW' && list.subtype !== 'AMENDMENT'" class="break-word">
                            {{ list.fromWhom }}
                        </td>
                        <td *ngIf="list.subtype === 'WITHDRAW' || list.subtype === 'AMENDMENT'" class="break-word">
                            {{ list.ministerDepartmentName }}
                        </td>
                        <td>
                            {{ list.subtype }}
                        </td>
                        <td>
                            {{ list.createdDate | date: "dd-MM-yyyy" }}
                        </td>
                        <td>
                            <nz-tag [nzColor]="'green'">{{ list.status?.replace("_", " ") }}</nz-tag>
                        </td>
                    </tr>
                </ng-container>
            </tbody>
        </nz-table>
    </nz-tab>
</nz-tabset>
<nz-modal [(nzVisible)]="isEditVisible" [nzFooter]="null" [nzClosable]="false">
    <div class="width-100 pading-all">
      <div class="row marginbtm-15">
        <div class="col-md-4">
          {{"cpl.docamendments.fileno" | translate}}
        </div>
        <div class="col-md-8">
          <input
            disabled
            nz-input
            placeholder='{{"business-dashboard.cpl.view.filenumber" | translate }}'
            [(ngModel)]="tempFile.fileNumber"
          />
        </div>
      </div>
      <div class="row marginbtm-15">
        <div class="col-md-4">
            {{"cpl.docamendments.filesubject" | translate}}
        </div>
        <div class="col-md-8">
          <input
            nz-input
            placeholder='{{"business-dashboard.cpl.view.filesubject" | translate }}'
            [(ngModel)]="tempFile.subject"
          />
        </div>
      </div>
      <div class="row marginbtm-15">
        <div class="col-md-4">
          {{"cpl.docamendments.filepriority" | translate}}
        </div>
        <div class="col-md-8">
          <nz-radio-group [(ngModel)]="tempFile.priority">
            <label
              nz-radio
              [nzValue]="priority.value"
              *ngFor="let priority of priorities"
              >{{ priority.label }}</label
            >
          </nz-radio-group>
        </div>
      </div>
      <div class="row mrt-50 margnrtp-15">
        <div class="col-md-12 d-flex justify-content-end">
          <button
            type="button"
            nz-button
            nzType="default"
            class="secondary-button button-admin-radius button-font dark-border dark-font"
            (click)="handleEditCancel()"
          >
          {{"cpl.correspondencelist.cancel" | translate}}
          </button>
          <button
            type="button"
            [disabled]="
              tempFile.subject == '' ||
              tempFile.fileNumber == '' ||
              tempFile.priority == ''
            "
            nz-button
            nzType="primary"
            (click)="handleEditOk()"
            class="margnlft-15 primary-button button-admin-radius button-font"
          >
            {{"cpl.docupload.update" | translate}}
          </button>
        </div>
      </div>
    </div>
  </nz-modal>