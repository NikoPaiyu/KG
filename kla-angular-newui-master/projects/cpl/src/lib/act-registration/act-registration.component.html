<div class="row">
    <div class="col-md-12 col-sm-12 mb-2">
        <nz-breadcrumb>
            <nz-breadcrumb-item>
                {{ "cpl.actregistration.dash" | translate }}
            </nz-breadcrumb-item>
            <nz-breadcrumb-item>
                {{ "cpl.actregistration.cpl" | translate }}
            </nz-breadcrumb-item>
        </nz-breadcrumb>
    </div>
</div>
<div class="sticky_action_bar">
<div class="row d-flex justify-content-between">
    <div class="col-md-6">
        <h2 class="admin-page-heading">
            {{ "cpl.actregistration.act" | translate  }}
        </h2>
    </div>
    <div class="col-md-6 d-flex justify-content-between">
        <div></div>
        <div class="d-flex justify-content-between">
            <button class="mr-6" nzType="default" nz-button
                (click)="submitForm(true)">
                {{ "cpl.docupload.save" | translate }} 
            </button>
            <button class="" nzType="primary" nz-button
                nz-popconfirm nzPopconfirmTitle='{{"business-dashboard.cpl.registrationconform.wanttosend" | translate }}' (nzOnConfirm)="submitForm(false)"
                (nzOnCancel)="cancel()">
                {{ "cpl.actregistration.submit" | translate }}
            </button>
        </div>
    </div>
</div>
<nz-divider></nz-divider>
</div>

<form nz-form [formGroup]="actForm" class="cpl-register">
    <div class="row">
        <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip='{{"business-dashboard.cpl.view.selassembly" | translate}}'>
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label> {{ "cpl.docupload.assembly" | translate }}</nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <nz-select nzAllowClear nzPlaceHolder='{{"cpl.docupload.selassembly" | translate}}' name="assemblyId"
                                formControlName="assembly" (ngModelChange)="getSessionForAssembly()">
                                <nz-option *ngFor="let item of assemblyList" [nzLabel]="item.assemblyId"
                                    [nzValue]="item.id">
                                </nz-option>
                            </nz-select>
                        </div>
                    </div>
                </nz-form-control>
            </nz-form-item>
        </div>
        <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip='{{"business-dashboard.cpl.view.selsession" | translate}}'>
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label> {{ "cpl.docupload.session" | translate }}</nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <nz-select nzAllowClear nzPlaceHolder='{{"cpl.docupload.selsession" | translate}}' name="sessionId"
                                formControlName="session">
                                <nz-option *ngFor="let item of sessionList" [nzLabel]="item.sessionId"
                                    [nzValue]="item.id">
                                </nz-option>
                            </nz-select>
                        </div>
                    </div>
                </nz-form-control>
            </nz-form-item>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip='{{"cpl.cplview.enteDocType" | translate}}'>
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label>{{ "cpl.actregistration.doctype" | translate }} </nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <nz-select nzPlaceHolder='{{"cpl.docupload.selectdoctype" | translate}}' nzShowSearch nzAllowClear
                                formControlName="doctype" nzDisabled>
                                <nz-option nzLabel="ACT" nzValue="ACT"></nz-option>
                            </nz-select>
                        </div>
                    </div>
                </nz-form-control>
            </nz-form-item>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip='{{"cpl.actregistration.enterActName" | translate}}'>
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label>{{ "cpl.actregistration.actname" | translate }}</nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <input nz-input maxlength="254" placeholder='{{"cpl.actregistration.actname" | translate}}' formControlName="documentname" />
                        </div>
                    </div>
                </nz-form-control> 
            </nz-form-item>
        </div>
        <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip='{{"cpl.actregistration.enteractNumber" | translate}}'>
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label>{{ "cpl.actregistration.actno" | translate}}</nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <input nz-input maxlength="40" placeholder='{{"cpl.documents.documentnumber" | translate}}'  formControlName="docNumber" />
                        </div>
                    </div>
                </nz-form-control>
            </nz-form-item>
        </div>
      
    </div>
    <div class="row">
        <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip='{{"cpl.registration.enterDepartmentFileNo" | translate}}'>
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label>{{ "cpl.cplview.legsectionfileNo" | translate}}</nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <input nz-input maxlength="40" placeholder='{{"cpl.documents.departmentfileno" | translate}}'
                                formControlName="documentfileno" />
                        </div>
                    </div>
                </nz-form-control>
            </nz-form-item>
        </div>
        <!-- <div class="col-md-6">
            <nz-form-item>
                <nz-form-control nzErrorTip="Select Section name">
                    <div class="row">
                        <div class="col-md-4">
                            <nz-form-label>Section name</nz-form-label>
                        </div>
                        <div class="col-md-8" [formGroup]="actForm">
                            <nz-select nzShowSearch nzAllowClear nzPlaceHolder="Select Section"
                                formControlName="sectionName">
                                <nz-option nzLabel="CPL Section" nzValue="CPL Section">
                                </nz-option>
                            </nz-select>
                        </div>
                    </div>
                </nz-form-control>
            </nz-form-item>
        </div> -->
    </div>
    <div class="row">
        <div class="col-md-6">
            <nz-form-item>
              <nz-form-control nzErrorTip='{{"business-dashboard.question.questioncreate.placehldqdate" | translate}}'>
                <div class="row">
                  <div class="col-md-4">
                    <nz-form-label>{{"cpl.docpreparion.date" | translate}}</nz-form-label>
                  </div>
                  <div class="col-md-8" [formGroup]="actForm">
                   <nz-date-picker
                [nzDisabledDate]="disabledDate"
                formControlName="date"
                [nzFormat]="'dd-MM-yyyy'"
              >
              </nz-date-picker>
                  </div>
                </div>
              </nz-form-control>
            </nz-form-item>
          </div>
    <div class="col-md-6">
        <nz-form-item>
          <nz-form-control nzErrorTip='{{"cpl.actregistration.selectACTYear" | translate}}'>
            <div class="row">
              <div class="col-md-4">
                <nz-form-label>{{"cpl.actregistration.actyear" | translate}}</nz-form-label>
              </div>
              <div class="col-md-8" [formGroup]="actForm">
                <nz-select nzShowSearch nzAllowClear
                  nzPlaceHolder='{{"cpl.registration.selectyear" | translate}}' formControlName="docYear">
                  <nz-option *ngFor="let year of yearList" [nzLabel]="year" [nzValue]="year"></nz-option>
                </nz-select>
              </div>
            </div>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    
</form>
<div class="row">
    <div class="col-md-2">
        <nz-form-label>{{ "cpl.actregistration.covletter" | translate }}</nz-form-label>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12 marginbtm-10">
                <nz-upload 
                    nzAccept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/png"
                    [nzAction]="uploadURL" [(nzFileList)]="fileList1"
                    [nzShowButton]="fileList1.length < 1" [nzShowUploadList]="showUploadList2"
                    (nzChange)="handleChange2($event)"
                    [nzPreview]="handlePreview">
                    <button nz-button>
                        <i nz-icon nzType="upload" class="white"></i>{{"cpl.actregistration.clicktoupload" | translate}}
                    </button>
                </nz-upload>
            </div>
        </div>
    </div>
    </div>
<nz-divider></nz-divider>

<!--main document container-->
<div class="row">
    
    <div class="col-md-2">
        <nz-form-label>{{ "cpl.actregistration.maindoc" | translate}}</nz-form-label>
    </div>
    <div class="col-md-6">
        <div class="row">
            <div class="col-md-12 marginbtm-10">
                <nz-upload 
                    nzAccept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/png"
                    [nzAction]="uploadURL" [(nzFileList)]="fileList"
                    [nzShowButton]="fileList.length < 1" [nzShowUploadList]="showUploadList"
                    (nzChange)="handleChange($event)"
                    [nzPreview]="handlePreview">
                    <button nz-button>
                        <i nz-icon nzType="upload" class="white"></i>{{"cpl.actregistration.clicktoupload" | translate}}
                    </button>
                </nz-upload>
            </div>
        
    </div>
    </div>
    <!-- <div class="col-md-6">
        <div class="col-md-2">
            <nz-form-label>Covering Letter</nz-form-label>
        </div>
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-12 marginbtm-10">
                    <nz-upload 
                        nzAccept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/png"
                        [nzAction]="uploadURL" [(nzFileList)]="fileList1"
                        [nzShowButton]="fileList1.length < 1" [nzShowUploadList]="showUploadList2"
                        (nzChange)="handleChange2($event)">
                        <button nz-button>
                            <i nz-icon nzType="upload"></i>Click to Upload
                        </button>
                    </nz-upload>
                </div>
            </div>
        </div>
        </div> -->
</div>
<!-- end of main document container -->

<!-- additional files this container only view in department login -->
<div class="row">
    <div class="col-md-12">
        <nz-form-item *ngIf="this.actForm.valid && mainDoc.length !== 0">
            <nz-form-control>
                <nz-card style="width: 1000spx;">
                    <p>{{ "cpl.actregistration.additionalfile" | translate }}</p>
                    <nz-upload
                        nzAccept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/png"
                        [nzAction]="uploadURL1" [(nzFileList)]="fileLists" [nzShowButton]="fileLists.length < 3"
                        [nzShowUploadList]="showUploadList1" 
                        (nzChange)="handleChange1($event)" [nzMultiple]="true"
                        [nzPreview]="handlePreview">
                        <button nz-button>
                            <i nz-icon nzType="upload"></i>{{ "cpl.actregistration.clicktoupload" | translate}}
                        </button>
                    </nz-upload>
                </nz-card>
            </nz-form-control>
        </nz-form-item>
    </div>
</div>
<!-- end container only view in department login -->

<nz-modal
  [(nzVisible)]="previewVisible"
  [nzFooter]="null"
  (nzOnCancel)="cancelPreview()"
  nzWidth="800"
>
<div class="width-100 pading-all" *ngIf="this.docUrl !== null">
<div class="row margnrtp-15 margnrgt-15">
    <div class="col-md-12 align-items-center">
      <ngx-doc-viewer
        [url]="docUrl"
        viewer="url"
        style="width: 100%; height: 500px;"
      ></ngx-doc-viewer>
    </div>
  </div>
</div>
</nz-modal>